import{n as L,u as V,g as C,c as j,b as Y,f as z}from"./9kLigkeN.js";import{S as R,P as q}from"./BhNhUaj0.js";import{i as m,k as S,Y as H,e as E,L as J,ae as Q,af as _,l as W,a0 as X,M as Z,m as P,o as K,w as A,b as O,y as d,s as B,f as ee,P as te,N as oe}from"./eWEjO_t7.js";function re(e){const a=L({dir:m("ltr")});return S(()=>e?.value||a.dir?.value||"ltr")}function M(){const e=m(),a=S(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:V(e));return{primitiveElement:e,currentElement:a}}const x="data-reka-collection-item";function N(e={}){const{key:a="",isProvider:n=!1}=e,s=`${a}CollectionProvider`;let i;if(n){const r=m(new Map);i={collectionRef:m(),itemMap:r},X(s,i)}else i=H(s);const F=(r=!1)=>{const o=i.collectionRef.value;if(!o)return[];const l=Array.from(o.querySelectorAll(`[${x}]`)),p=Array.from(i.itemMap.value.values()).sort((v,I)=>l.indexOf(v.ref)-l.indexOf(I.ref));return r?p:p.filter(v=>v.ref.dataset.disabled!=="")},g=E({name:"CollectionSlot",setup(r,{slots:o}){const{primitiveElement:l,currentElement:f}=M();return W(f,()=>{i.collectionRef.value=f.value}),()=>_(R,{ref:l},o)}}),T=E({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(r,{slots:o,attrs:l}){const{primitiveElement:f,currentElement:p}=M();return J(v=>{if(p.value){const I=Q(p.value);i.itemMap.value.set(I,{ref:p.value,value:r.value}),v(()=>i.itemMap.value.delete(I))}}),()=>_(R,{...l,[x]:"",ref:f},o)}}),b=S(()=>Array.from(i.itemMap.value.values())),t=S(()=>i.itemMap.value.size);return{getItems:F,reactiveItems:b,itemMapSize:t,CollectionSlot:g,CollectionItem:T}}const ae="rovingFocusGroup.onEntryFocus",ne={bubbles:!1,cancelable:!0},se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ie(e,a){return a!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function le(e,a,n){const s=ie(e.key,n);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return se[s]}function k(e,a=!1){const n=C();for(const s of e)if(s===n||(s.focus({preventScroll:a}),C()!==n))return}function ue(e,a){return e.map((n,s)=>e[(a+s)%e.length])}const[ce,de]=j("RovingFocusGroup");var fe=E({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:a,emit:n}){const s=e,i=n,{loop:F,orientation:g,dir:T}=Z(s),b=re(T),t=Y(s,"currentTabStopId",i,{defaultValue:s.defaultCurrentTabStopId,passive:s.currentTabStopId===void 0}),r=m(!1),o=m(!1),l=m(0),{getItems:f,CollectionSlot:p}=N({isProvider:!0});function v(u){const y=!o.value;if(u.currentTarget&&u.target===u.currentTarget&&y&&!r.value){const w=new CustomEvent(ae,ne);if(u.currentTarget.dispatchEvent(w),i("entryFocus",w),!w.defaultPrevented){const h=f().map(c=>c.ref).filter(c=>c.dataset.disabled!==""),D=h.find(c=>c.getAttribute("data-active")===""),$=h.find(c=>c.getAttribute("data-highlighted")===""),U=h.find(c=>c.id===t.value),G=[D,$,U,...h].filter(Boolean);k(G,s.preventScrollOnEntryFocus)}}o.value=!1}function I(){setTimeout(()=>{o.value=!1},1)}return a({getItems:f}),de({loop:F,dir:b,orientation:g,currentTabStopId:t,onItemFocus:u=>{t.value=u},onItemShiftTab:()=>{r.value=!0},onFocusableItemAdd:()=>{l.value++},onFocusableItemRemove:()=>{l.value--}}),(u,y)=>(K(),P(d(p),null,{default:A(()=>[O(d(q),{tabindex:r.value||l.value===0?-1:0,"data-orientation":d(g),as:u.as,"as-child":u.asChild,dir:d(b),style:{outline:"none"},onMousedown:y[0]||(y[0]=w=>o.value=!0),onMouseup:I,onFocus:v,onBlur:y[1]||(y[1]=w=>r.value=!1)},{default:A(()=>[B(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),be=fe,pe=E({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const a=e,n=ce(),s=z(),i=S(()=>a.tabStopId||s),F=S(()=>n.currentTabStopId.value===i.value),{getItems:g,CollectionItem:T}=N();ee(()=>{a.focusable&&n.onFocusableItemAdd()}),te(()=>{a.focusable&&n.onFocusableItemRemove()});function b(t){if(t.key==="Tab"&&t.shiftKey){n.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const r=le(t,n.orientation.value,n.dir.value);if(r!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!a.allowShiftKey&&t.shiftKey)return;t.preventDefault();let o=[...g().map(l=>l.ref).filter(l=>l.dataset.disabled!=="")];if(r==="last")o.reverse();else if(r==="prev"||r==="next"){r==="prev"&&o.reverse();const l=o.indexOf(t.currentTarget);o=n.loop.value?ue(o,l+1):o.slice(l+1)}oe(()=>k(o))}}return(t,r)=>(K(),P(d(T),null,{default:A(()=>[O(d(q),{tabindex:F.value?0:-1,"data-orientation":d(n).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:r[0]||(r[0]=o=>{t.focusable?d(n).onItemFocus(i.value):o.preventDefault()}),onFocus:r[1]||(r[1]=o=>d(n).onItemFocus(i.value)),onKeydown:b},{default:A(()=>[B(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Ie=pe;export{se as M,Ie as R,M as a,re as b,be as c,le as g,N as u};
